(this.webpackJsonppgk=this.webpackJsonppgk||[]).push([[10],{45:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"j",(function(){return m})),r.d(t,"e",(function(){return g})),r.d(t,"b",(function(){return f})),r.d(t,"f",(function(){return h})),r.d(t,"a",(function(){return j})),r.d(t,"i",(function(){return b}));var a=r(47),n=r.n(a).a.create({baseURL:"http://65.0.248.114:80/api/"});n.defaults.headers.common["Content-Type"]="multipart/form-data",n.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var s=n,o=r(18),c=r(10),i=function(e){return function(t){t({type:c.a,payload:e})}},l=function(){return function(e){s.get("http://restcountries.eu/rest/v2/all?fields=name;flag;callingCodes;").then((function(t){var r=t.data;e({type:c.d,payload:r})})).catch((function(e){var t=JSON.stringify(e);o.a.error(JSON.parse(t).message)}))}},u=function(e,t,r){return function(a){var n;"Corporate"===r?n="/o/signUp/Corporate":"University"===r&&(n="/o/signUp/University");var l=new FormData;for(var u in e)l.append(u,e[u]);a(i(!0)),a({type:c.c,payload:e}),s.post(n,l).then((function(e){var r=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(r)),localStorage.setItem("steps",3),a({type:c.h,payload:3}),a(i(!1)),o.a.success(r.message),t.push("/register/authentication")})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),a(i(!1))}))}},p=function(e,t,r){return function(r){var a=new FormData;for(var n in e)a.append(n,e[n]);r(i(!0)),r({type:c.c,payload:e}),s.post("/o/signUp/Student",a).then((function(e){var a=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(a)),localStorage.setItem("steps",3),r({type:c.h,payload:3}),r(i(!1)),o.a.success(a.message),t.push("/register/studentAuthentication")})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),r(i(!1))}))}},d=function(e,t){return function(r){var a=new FormData;a.append("stakeholder",e.stakeholder),a.append("userID",e.userID),a.append("password",e.password),r(i(!0)),s.post("/o/login",a).then((function(e){var a=e.data;localStorage.setItem("token",a.token),r(i(!1)),o.a.success("Login successful"),"/dashboard"===a.redirectURL?t.push("/"):t.push("/register/payment")})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),r(i(!1))}))}},m=function(e,t,r){return function(a){var n;n=1===t?"/o/verifyMobile":"/o/verifyEmail";var c=new FormData;for(var l in e)c.append(l,e[l]);a(i(!0)),s.post(n,c).then((function(e){var t=e.data;a(i(!1)),o.a.success(t.message),r.push("/register/completed")})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),a(i(!1))}))}},g=function(e){return function(t){var r=new FormData;for(var a in e)r.append(a,e[a]);t(i(!0)),s.post("/o/resendOtp",r).then((function(e){var r=e.data;o.a.success(r.message),t(i(!1))})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),t(i(!1))}))}},f=function(e){return function(t){var r;"Corporate"===e?r="/u/lut/?lutList=corporateType&lutList=corporateCategory&lutList=corporateIndustry":"University"===e&&(r="/u/lut/?lutList=universityCategory"),s.get(r).then((function(e){var r=e.data;t({type:c.b,payload:r})})).catch((function(e){var t=JSON.stringify(e);o.a.error(JSON.parse(t).message)}))}},h=function(e,t){return function(r){localStorage.setItem("steps",t),r({type:c.c,payload:e}),r({type:c.h,payload:t})}},j=function(){return function(e){var t=new FormData;t.append("payType","REG_FEE"),e(i(!0));var r=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(r)}};s.post("/pg/createPayment",t,a).then((function(t){var r=t.data;sessionStorage.setItem("orderID",r.orderID),e({type:c.f,payload:r}),e(i(!1))})).catch((function(t){t.response?o.a.error(t.response.data):o.a.error("Something Wrong!",t.message),e(i(!1))}))}},b=function(e){return function(t){var r=new FormData;r.append("orderID",e);var a=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(a)}};t(i(!0)),s.post("/pg/verifyPayment",r,n).then((function(e){var r=e.data;t(i(!1)),o.a.success(r[0]),o.a.success(r[1]),o.a.success(r[2])})).catch((function(e){e.response?o.a.error(e.response.data.errors[0].message):o.a.error("Something Wrong!",e.message),t(i(!1))}))}}},87:function(e,t,r){"use strict";r.r(t);var a=r(2),n=r(16),s=r(0),o=r(11),c=r(18),i=r(45),l=r(1),u=function(e){var t=e.history,r=e.errors,a=e.emailOtp,n=e.otp,s=e.handlerChange,o=e.handleSubmit,c=e.resend,i=r.otpErr,u=r.otp2Err;return Object(l.jsx)("form",{className:"login-form reg-form",onSubmit:o,children:Object(l.jsx)("div",{className:"row justify-content-center",children:Object(l.jsxs)("div",{className:"col-md-10",children:[Object(l.jsx)("div",{className:"reg-header justify-content-center",children:"Verify your Primary Email & Phone Number"}),Object(l.jsx)("div",{className:"row justify-content-center reg-center",children:Object(l.jsxs)("div",{className:"col-md-8",children:[Object(l.jsxs)("div",{className:"reg-media",children:[Object(l.jsx)("div",{className:"reg-media-icon",children:Object(l.jsx)("i",{className:"fas fa-envelope"})}),Object(l.jsx)("div",{className:"reg-media-grp",children:Object(l.jsxs)("div",{className:"login-grp",children:[Object(l.jsx)("label",{className:"login-label",children:"Enter the OTP sent to Primary Contact Email"}),Object(l.jsx)("input",{type:"password",name:"emailOtp",onChange:s,value:a,className:"login-inp".concat(u?" login-inp-error":""),placeholder:"xxxxxx",required:!1}),u?Object(l.jsx)("p",{className:"inp-errors",children:u}):null,Object(l.jsx)("p",{className:"reg-resend",children:Object(l.jsx)("a",{href:"javascript:void(0)",onClick:function(){return c("Email")},children:"Resend OTP"})})]})})]}),Object(l.jsxs)("div",{className:"reg-media",children:[Object(l.jsx)("div",{className:"reg-media-icon",children:Object(l.jsx)("i",{className:"far fa-comment-alt"})}),Object(l.jsx)("div",{className:"reg-media-grp",children:Object(l.jsxs)("div",{className:"login-grp",children:[Object(l.jsx)("label",{className:"login-label",children:"Enter the OTP sent to Primary Contact Mobile"}),Object(l.jsx)("input",{type:"password",name:"otp",onChange:s,value:n,className:"login-inp".concat(i?" login-inp-error":""),placeholder:"xxxxxx",required:!1}),i?Object(l.jsx)("p",{className:"inp-errors",children:i}):null,Object(l.jsx)("p",{className:"reg-resend",children:Object(l.jsx)("a",{href:"javascript:void(0)",onClick:function(){return c("Phone")},children:"Resend OTP"})})]})})]})]})}),Object(l.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[Object(l.jsx)("button",{type:"button",onClick:function(){t.push("/register/contactPersonnel")},className:"reg-btn",children:"Previous"}),Object(l.jsx)("button",{type:"submit",className:"reg-btn",children:"Next"})]})]})})})};t.default=function(e){var t=Object(s.useState)(""),r=Object(n.a)(t,2),p=r[0],d=r[1],m=Object(s.useState)(""),g=Object(n.a)(m,2),f=g[0],h=g[1],j=Object(s.useState)({otpErr:"",otp2Err:""}),b=Object(n.a)(j,2),v=b[0],O=b[1],y=Object(o.b)();return Object(l.jsx)(u,{history:e.history,errors:v,emailOtp:f,otp:p,resend:function(e){var t=JSON.parse(localStorage.getItem("regStatus")),r={stakeholder:t.stakeholder,platformUID:t.platformUID,otpType:e};y(Object(i.e)(r))},handlerChange:function(e){var t=e.target,r=t.name,n=t.value;switch(r){case"otp":return d(n),h(""),void(/^[0-9\b]+$/.test(n)&&6===n.length?O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otpErr:""})})):O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otpErr:"Invalid"})})));case"emailOtp":return d(""),h(n),void(/^[0-9\b]+$/.test(n)&&6===n.length?O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otp2Err:""})})):O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otp2Err:"Invalid"})})))}},handleSubmit:function(t){t.preventDefault();var r=v.otpErr,a=v.otp2Err,n=JSON.parse(localStorage.getItem("regStatus"));if(p)if(r)c.a.error("Please enter Mobile OTP");else{var s={stakeholder:n.stakeholder,platformUID:n.platformUID,otp:p,phone:n.phoneNumber};y(Object(i.j)(s,1,e.history))}else if(a)c.a.error("Please enter Email OTP");else{var o={stakeholder:n.stakeholder,platformUID:n.platformUID,otp:f,email:n.email};y(Object(i.j)(o,2,e.history))}}})}}}]);