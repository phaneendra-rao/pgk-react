(this.webpackJsonppgk=this.webpackJsonppgk||[]).push([[8],{45:function(e,t,r){"use strict";r.d(t,"c",(function(){return l})),r.d(t,"g",(function(){return u})),r.d(t,"h",(function(){return p})),r.d(t,"d",(function(){return d})),r.d(t,"j",(function(){return m})),r.d(t,"e",(function(){return h})),r.d(t,"b",(function(){return g})),r.d(t,"f",(function(){return f})),r.d(t,"a",(function(){return j})),r.d(t,"i",(function(){return b}));var a=r(47),n=r.n(a).a.create({baseURL:"http://65.0.248.114:80/api/"});n.defaults.headers.common["Content-Type"]="multipart/form-data",n.interceptors.request.use((function(e){return console.log(e),e}),(function(e){return Promise.reject(e)})),n.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)}));var o=n,s=r(18),c=r(10),i=function(e){return function(t){t({type:c.a,payload:e})}},l=function(){return function(e){o.get("http://restcountries.eu/rest/v2/all?fields=name;flag;callingCodes;").then((function(t){var r=t.data;e({type:c.d,payload:r})})).catch((function(e){var t=JSON.stringify(e);s.a.error(JSON.parse(t).message)}))}},u=function(e,t,r){return function(a){var n;"Corporate"===r?n="/o/signUp/Corporate":"University"===r&&(n="/o/signUp/University");var l=new FormData;for(var u in e)l.append(u,e[u]);a(i(!0)),a({type:c.c,payload:e}),o.post(n,l).then((function(e){var r=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(r)),localStorage.setItem("steps",3),a({type:c.h,payload:3}),a(i(!1)),s.a.success(r.message),t.push("/register/authentication")})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),a(i(!1))}))}},p=function(e,t,r){return function(r){var a=new FormData;for(var n in e)a.append(n,e[n]);r(i(!0)),r({type:c.c,payload:e}),o.post("/o/signUp/Student",a).then((function(e){var a=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(a)),localStorage.setItem("steps",3),r({type:c.h,payload:3}),r(i(!1)),s.a.success(a.message),t.push("/register/studentAuthentication")})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),r(i(!1))}))}},d=function(e,t){return function(r){var a=new FormData;a.append("stakeholder",e.stakeholder),a.append("userID",e.userID),a.append("password",e.password),r(i(!0)),o.post("/o/login",a).then((function(e){var a=e.data;localStorage.setItem("token",a.token),r(i(!1)),s.a.success("Login successful"),"/dashboard"===a.redirectURL?t.push("/"):t.push("/register/payment")})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),r(i(!1))}))}},m=function(e,t,r){return function(a){var n;n=1===t?"/o/verifyMobile":"/o/verifyEmail";var c=new FormData;for(var l in e)c.append(l,e[l]);a(i(!0)),o.post(n,c).then((function(e){var t=e.data;a(i(!1)),s.a.success(t.message),r.push("/register/completed")})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),a(i(!1))}))}},h=function(e){return function(t){var r=new FormData;for(var a in e)r.append(a,e[a]);t(i(!0)),o.post("/o/resendOtp",r).then((function(e){var r=e.data;s.a.success(r.message),t(i(!1))})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),t(i(!1))}))}},g=function(e){return function(t){var r;"Corporate"===e?r="/u/lut/?lutList=corporateType&lutList=corporateCategory&lutList=corporateIndustry":"University"===e&&(r="/u/lut/?lutList=universityCategory"),o.get(r).then((function(e){var r=e.data;t({type:c.b,payload:r})})).catch((function(e){var t=JSON.stringify(e);s.a.error(JSON.parse(t).message)}))}},f=function(e,t){return function(r){localStorage.setItem("steps",t),r({type:c.c,payload:e}),r({type:c.h,payload:t})}},j=function(){return function(e){var t=new FormData;t.append("payType","REG_FEE"),e(i(!0));var r=localStorage.getItem("token"),a={headers:{Authorization:"Bearer ".concat(r)}};o.post("/pg/createPayment",t,a).then((function(t){var r=t.data;sessionStorage.setItem("orderID",r.orderID),e({type:c.f,payload:r}),e(i(!1))})).catch((function(t){t.response?s.a.error(t.response.data):s.a.error("Something Wrong!",t.message),e(i(!1))}))}},b=function(e){return function(t){var r=new FormData;r.append("orderID",e);var a=localStorage.getItem("token"),n={headers:{Authorization:"Bearer ".concat(a)}};t(i(!0)),o.post("/pg/verifyPayment",r,n).then((function(e){var r=e.data;t(i(!1)),s.a.success(r[0]),s.a.success(r[1]),s.a.success(r[2])})).catch((function(e){e.response?s.a.error(e.response.data.errors[0].message):s.a.error("Something Wrong!",e.message),t(i(!1))}))}}},80:function(e,t,r){"use strict";r.r(t);var a=r(24),n=r(2),o=r(16),s=r(0),c=r.n(s),i=r(11),l=r(18),u=r(1),p=function(e){var t=e.history,r=e.selectedName,a=e.attachment,n=e.path,o=e.categoryList,s=e.corporateSecondary,i=e.handleChangeImg,l=e.handlerChange,p=e.handleSubmit,d=o.corporateCategory,m=o.corporateIndustry,h=o.corporateTypes,g=o.universityCategory,f="data:image/png;base64,"+n;return Object(u.jsx)("form",{onSubmit:p,className:"login-form reg-form",children:Object(u.jsx)("div",{className:"row justify-content-center",children:Object(u.jsxs)("div",{className:"col-md-10",children:["Corporate"===r?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-6 pr-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsxs)("select",{name:"corporateType",onChange:l,value:s.corporateType?s.corporateType:"DEFAULT",className:"login-inp",autoFocus:!0,required:!0,children:[Object(u.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Corporate Type"}),c.a.Children.toArray(h&&h.map((function(e){return Object(u.jsx)("option",{value:e.codeDescription,children:e.codeDescription})})))]})})}),Object(u.jsx)("div",{className:"col-md-6 pl-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsxs)("select",{name:"corporateCategory",onChange:l,value:s.corporateCategory?s.corporateCategory:"DEFAULT",className:"login-inp",required:!0,children:[Object(u.jsx)("option",{value:"DEFAULT",disabled:!0,children:"Corporate Category"}),c.a.Children.toArray(d&&d.map((function(e){return Object(u.jsx)("option",{value:e.codeDescription,children:e.codeDescription})})))]})})})]}),Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-6 pr-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsxs)("select",{name:"corporateIndustry",onChange:l,value:s.corporateIndustry?s.corporateIndustry:"DEFAULT",className:"login-inp",required:!1,children:[Object(u.jsxs)("option",{value:"DEFAULT",disabled:!0,children:[r," Industry"]}),c.a.Children.toArray(m&&m.map((function(e){return Object(u.jsx)("option",{value:e.codeDescription,children:e.codeDescription})})))]})})}),Object(u.jsx)("div",{className:"col-md-6 pl-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsx)("input",{type:"date",name:"yearOfEstablishment",onChange:l,className:"login-inp",title:"Year of Establishment",placeholder:"Year of Establishment",required:!0})})})]})]}):null,"University"===r?Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("div",{className:"row",children:[Object(u.jsx)("div",{className:"col-md-6 pr-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsxs)("select",{name:"corporateIndustry",onChange:l,value:s.corporateIndustry?s.corporateIndustry:"DEFAULT",className:"login-inp",required:!1,children:[Object(u.jsx)("option",{value:"DEFAULT",disabled:!0,children:"University Sector"}),c.a.Children.toArray(g&&g.map((function(e){return Object(u.jsx)("option",{value:e.codeDescription,children:e.codeDescription})})))]})})}),Object(u.jsx)("div",{className:"col-md-6 pl-1",children:Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsx)("input",{type:"date",name:"yearOfEstablishment",onChange:l,className:"login-inp",title:"Year of Establishment",placeholder:"Year of Establishment",required:!0})})})]})}):null,Object(u.jsxs)("div",{className:"reg-attach",children:[a?Object(u.jsx)("span",{children:Object(u.jsx)("i",{className:"fas fa-check-circle"})}):null,Object(u.jsx)("input",{type:"file",onChange:i,accept:"image/*",className:"reg-inp",name:"attachment",id:"attachment",required:!1}),Object(u.jsx)("label",{htmlFor:"attachment",className:"reg-label",children:"Attach"})]}),f?Object(u.jsx)("div",{className:"text-center",children:Object(u.jsx)("img",{src:f,alt:"please select image",className:"img-thumbnail mb-3 w-50"})}):null,Object(u.jsx)("div",{className:"login-grp",children:Object(u.jsx)("textarea",{name:"companyProfile",onChange:l,defaultValue:s.companyProfile,rows:6,className:"login-inp login-txtarea",placeholder:"Company Profile (in Brief)",required:!1})}),Object(u.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[Object(u.jsx)("button",{type:"button",className:"reg-btn",onClick:function(){t.push("/register")},children:"Previous"}),Object(u.jsx)("button",{type:"submit",className:"reg-btn",children:"Next"})]})]})})})},d=r(45);t.default=function(e){var t={corporateType:"",corporateCategory:"",corporateIndustry:"",companyProfile:"",attachment:"",yearOfEstablishment:""},r=Object(s.useState)(t),c=Object(o.a)(r,2),m=c[0],h=c[1],g=Object(s.useState)({profileErr:""}),f=Object(o.a)(g,2),j=f[0],b=f[1],y=Object(s.useState)(""),v=Object(o.a)(y,2),O=v[0],x=v[1],N=Object(i.c)((function(e){return e.CorporateReducer.corporatePrimaryState})),C=Object(i.c)((function(e){return e.CorporateReducer.categoryList})),S=localStorage.getItem("type"),D=Object(i.b)();Object(s.useEffect)((function(){D(Object(d.b)(S)),N&&Object.keys(t).map((function(e){var t=function(t){e===t&&h((function(e){return Object(n.a)(Object(n.a)({},e),{},Object(a.a)({},t,N[t]))}))};for(var r in N)t(r)}))}),[]);return Object(u.jsx)(p,{history:e.history,selectedName:S,path:O,corporateSecondary:m,attachment:m.attachment,categoryList:C,handleChangeImg:function(e){if(e.preventDefault(),e.target.files){h((function(t){return Object(n.a)(Object(n.a)({},t),{},{attachment:e.target.files[0]})}));for(var t=e.target.files.length,r=0;r<t;r++){var a=new FileReader;a.onload=function(e){x(e.target.result.split(",")[1])}.bind(undefined),a.readAsDataURL(e.target.files[r])}}},handlerChange:function(e){var t=e.target,r=t.name,o=t.value;if("yearOfEstablishment"===r){var s=parseInt(o);h((function(e){return Object(n.a)(Object(n.a)({},e),{},Object(a.a)({},r,s))}))}else h((function(e){return Object(n.a)(Object(n.a)({},e),{},Object(a.a)({},r,o))}));switch(r){case"companyProfile":return void(o?b((function(e){return Object(n.a)(Object(n.a)({},e),{},{profileErr:""})})):o||b((function(e){return Object(n.a)(Object(n.a)({},e),{},{profileErr:"profile error"})})))}},handleSubmit:function(t){t.preventDefault();var r=j.profileErr,a=m.corporateType,n=m.corporateCategory,o=m.companyProfile,s=m.attachment,c=m.yearOfEstablishment,i=m.corporateIndustry;"Corporate"===S?a&&n&&o&&s&&c&&!r?(D(Object(d.f)(m,2)),e.history.push("/register/contactPersonnel")):l.a.error("Please enter required input fields"):"University"===S&&(i&&o&&s&&c&&!r?(D(Object(d.f)(m,2)),e.history.push("/register/contactPersonnel")):l.a.error("Please enter required input fields"))}})}}}]);