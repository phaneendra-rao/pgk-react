(this.webpackJsonppgk=this.webpackJsonppgk||[]).push([[20],{135:function(e,t,r){"use strict";r.r(t);var a=r(9),n=r(24),o=r(1),s=r(23),i=r(5),c=r(0),l=function(e){var t=e.history,r=e.errors,a=e.emailOtp,n=e.otp,o=e.handlerChange,s=e.handleSubmit,i=e.resend,l=r.otpErr,u=r.otp2Err;return Object(c.jsx)("form",{className:"login-form reg-form",onSubmit:s,children:Object(c.jsx)("div",{className:"row justify-content-center",children:Object(c.jsxs)("div",{className:"col-md-10",children:[Object(c.jsx)("div",{className:"reg-header justify-content-center",children:"Verify your Primary Email & Phone Number"}),Object(c.jsx)("div",{className:"row justify-content-center reg-center",children:Object(c.jsxs)("div",{className:"col-md-8",children:[Object(c.jsxs)("div",{className:"reg-media",children:[Object(c.jsx)("div",{className:"reg-media-icon",children:Object(c.jsx)("i",{className:"fas fa-envelope"})}),Object(c.jsx)("div",{className:"reg-media-grp",children:Object(c.jsxs)("div",{className:"login-grp",children:[Object(c.jsx)("label",{className:"login-label",children:"Enter the OTP sent to Primary Contact Email"}),Object(c.jsx)("input",{type:"password",name:"emailOtp",onChange:o,value:a,className:"login-inp".concat(u?" login-inp-error":""),placeholder:"xxxxxx",required:!1}),u?Object(c.jsx)("p",{className:"inp-errors",children:u}):null,Object(c.jsx)("p",{className:"reg-resend",children:Object(c.jsx)("a",{href:"javascript:void(0)",onClick:function(){return i("Email")},children:"Resend OTP"})})]})})]}),Object(c.jsxs)("div",{className:"reg-media",children:[Object(c.jsx)("div",{className:"reg-media-icon",children:Object(c.jsx)("i",{className:"far fa-comment-alt"})}),Object(c.jsx)("div",{className:"reg-media-grp",children:Object(c.jsxs)("div",{className:"login-grp",children:[Object(c.jsx)("label",{className:"login-label",children:"Enter the OTP sent to Primary Contact Mobile"}),Object(c.jsx)("input",{type:"password",name:"otp",onChange:o,value:n,className:"login-inp".concat(l?" login-inp-error":""),placeholder:"xxxxxx",required:!1}),l?Object(c.jsx)("p",{className:"inp-errors",children:l}):null,Object(c.jsx)("p",{className:"reg-resend",children:Object(c.jsx)("a",{href:"javascript:void(0)",onClick:function(){return i("Phone")},children:"Resend OTP"})})]})})]})]})}),Object(c.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[Object(c.jsx)("button",{type:"button",onClick:function(){t.push("/register/contactPersonnel")},className:"reg-btn",children:"Previous"}),Object(c.jsx)("button",{type:"submit",className:"reg-btn",children:"Next"})]})]})})})},u=r(97);t.default=function(e){var t=Object(o.useState)(""),r=Object(n.a)(t,2),d=r[0],p=r[1],m=Object(o.useState)(""),f=Object(n.a)(m,2),g=f[0],h=f[1],v=Object(o.useState)({otpErr:"",otp2Err:""}),j=Object(n.a)(v,2),b=j[0],O=j[1],y=Object(s.a)();return Object(c.jsx)(l,{history:e.history,errors:b,emailOtp:g,otp:d,resend:function(e){var t=JSON.parse(localStorage.getItem("regStatus")),r={stakeholder:t.stakeholder,platformUID:t.platformUID,otpType:e};y(Object(u.d)(r))},handlerChange:function(e){var t=e.target,r=t.name,n=t.value;switch(r){case"otp":return p(n),void(/^[0-9\b]+$/.test(n)&&6===n.length?O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otpErr:""})})):O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otpErr:"Invalid"})})));case"emailOtp":return h(n),void(/^[0-9\b]+$/.test(n)&&6===n.length?O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otp2Err:""})})):O((function(e){return Object(a.a)(Object(a.a)({},e),{},{otp2Err:"Invalid"})})))}},handleSubmit:function(t){t.preventDefault();var r=b.otpErr,a=b.otp2Err,n=JSON.parse(localStorage.getItem("regStatus"));if(d&&g)if(r||a)i.a.error("Please enter Mobile & Email OTP");else{var o={stakeholder:null===n||void 0===n?void 0:n.stakeholder,platformUID:null===n||void 0===n?void 0:n.platformUID,email:null===n||void 0===n?void 0:n.email,phone:null===n||void 0===n?void 0:n.phoneNumber,phoneOtp:d,emailOtp:g};y(Object(u.j)(o,e.history))}}})}},97:function(e,t,r){"use strict";r.d(t,"e",(function(){return s})),r.d(t,"c",(function(){return c})),r.d(t,"g",(function(){return l})),r.d(t,"h",(function(){return u})),r.d(t,"j",(function(){return d})),r.d(t,"d",(function(){return p})),r.d(t,"b",(function(){return m})),r.d(t,"f",(function(){return f})),r.d(t,"a",(function(){return g})),r.d(t,"i",(function(){return h}));var a=r(10),n=r(5),o=r(21),s=function(){return function(e){e({type:o.h,payload:void 0})}},i=function(e){return function(t){t({type:o.a,payload:e})}},c=function(){return function(e){a.a.get("http://restcountries.eu/rest/v2/all?fields=name;flag;callingCodes;").then((function(t){var r=t.data;e({type:o.d,payload:r})})).catch((function(e){var t=JSON.stringify(e);n.a.error(JSON.parse(t).message)}))}},l=function(e,t,r){return function(s){var c;"Corporate"===r?c="/o/signUp/Corporate":"University"===r&&(c="/o/signUp/University");var l=new FormData;for(var u in e)l.append(u,e[u]);s(i(!0)),s({type:o.c,payload:e}),a.a.post(c,l).then((function(e){var r=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(r)),localStorage.setItem("steps",3),s({type:o.i,payload:3}),s(i(!1)),n.a.success(r.message),t.push("/register/authentication")})).catch((function(e){e.response?n.a.error(e.response.data.errors[0].message):n.a.error("Something Wrong!",e.message),s(i(!1))}))}},u=function(e,t,r){return function(r){var s=new FormData;for(var c in e)s.append(c,e[c]);r(i(!0)),r({type:o.c,payload:e}),a.a.post("/o/signUp/Student",s).then((function(e){var a=e.data;localStorage.removeItem("imgpath"),localStorage.setItem("regStatus",JSON.stringify(a)),localStorage.setItem("steps",3),r({type:o.i,payload:3}),r(i(!1)),n.a.success(a.message),t.push("/register/studentAuthentication")})).catch((function(e){e.response?n.a.error(e.response.data.errors[0].message):n.a.error("Something Wrong!",e.message),r(i(!1))}))}},d=function(e,t,r){return function(t){var o=new FormData;for(var s in e)o.append(s,e[s]);t(i(!0)),a.a.post("/o/verifyOTP",o).then((function(e){var a=e.data;t(i(!1)),(null===a||void 0===a?void 0:a.MobileVerified)&&(null===a||void 0===a?void 0:a.emailVerified)?(n.a.success("OTP verification successful"),r.push("/register/completed")):n.a.error("OTP verification failed")})).catch((function(e){e.response?n.a.error(e.response.data.errors[0].message):n.a.error("Something Wrong!",e.message),t(i(!1))}))}},p=function(e){return function(t){var r=new FormData;for(var o in e)r.append(o,e[o]);t(i(!0)),a.a.post("/o/resendOtp",r).then((function(e){var r=e.data;n.a.success(r.message),t(i(!1))})).catch((function(e){e.response?n.a.error(e.response.data.errors[0].message):n.a.error("Something Wrong!",e.message),t(i(!1))}))}},m=function(e){return function(t){var r;"Corporate"===e?r="/u/lut/?lutList=corporateType&lutList=corporateCategory&lutList=corporateIndustry":"University"===e&&(r="/u/lut/?lutList=universityCategory"),a.a.get(r).then((function(e){var r=e.data;t({type:o.b,payload:r})})).catch((function(e){var t=JSON.stringify(e);n.a.error(JSON.parse(t).message)}))}},f=function(e,t){return function(r){localStorage.setItem("steps",t),r({type:o.c,payload:e}),r({type:o.i,payload:t})}},g=function(e){return function(t){var r=new FormData;for(var s in e)r.append(s,e[s]);t(i(!0));var c=localStorage.getItem("token"),l={headers:{Authorization:"Bearer ".concat(c)}};a.a.post("/pg/createPayment",r,l).then((function(e){var r=e.data;sessionStorage.setItem("orderID",r.orderID),t({type:o.f,payload:r}),t(i(!1))})).catch((function(e){e.response?n.a.error(e.response.data):n.a.error("Something Wrong!",e.message),t(i(!1))}))}},h=function(e){return function(t){var r=new FormData;r.append("orderID",e);var s=localStorage.getItem("token"),c={headers:{Authorization:"Bearer ".concat(s)}};t(i(!0)),a.a.post("/pg/verifyPayment",r,c).then((function(e){var r,a=e.data;null===a||void 0===a||null===(r=a.messages)||void 0===r||r.forEach((function(e){n.a.success(e)})),t(i(!1)),t({type:o.g,payload:JSON.parse(null===a||void 0===a?void 0:a.referenceObject)})})).catch((function(e){e.response?n.a.error(e.response.data.errors[0].message):n.a.error("Something Wrong!",e.message),t(i(!1))}))}}}}]);